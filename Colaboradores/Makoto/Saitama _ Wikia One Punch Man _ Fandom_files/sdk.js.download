!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SilverSurferSDK=e():t.SilverSurferSDK=e()}(window,(()=>(()=>{var t={9996:t=>{"use strict";var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?s((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function o(t,e,n){return t.concat(e).map((function(t){return r(t,n)}))}function i(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function a(t,e){try{return e in t}catch(t){return!1}}function s(t,n,c){(c=c||{}).arrayMerge=c.arrayMerge||o,c.isMergeableObject=c.isMergeableObject||e,c.cloneUnlessOtherwiseSpecified=r;var u=Array.isArray(n);return u===Array.isArray(t)?u?c.arrayMerge(t,n,c):function(t,e,n){var o={};return n.isMergeableObject(t)&&i(t).forEach((function(e){o[e]=r(t[e],n)})),i(e).forEach((function(i){(function(t,e){return a(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(a(t,i)&&n.isMergeableObject(e[i])?o[i]=function(t,e){if(!e.customMerge)return s;var n=e.customMerge(t);return"function"==typeof n?n:s}(i,n)(t[i],e[i],n):o[i]=r(e[i],n))})),o}(t,n,c):r(n,c)}s.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return s(t,n,e)}),{})};var c=s;t.exports=c},8668:(t,e,n)=>{var r=n(1469);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},6384:(t,e,n)=>{var r=n(7040),o=n(4125),i=n(2117),a=n(7518),s=n(4705);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},7443:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},9932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},2908:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},4865:(t,e,n)=>{var r=n(9465),o=n(7813),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},8470:(t,e,n)=>{var r=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},9465:(t,e,n)=>{var r=n(8777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5990:t=>{t.exports=function(t){return t}},7786:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4239:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},2118:t=>{t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},939:(t,e,n)=>{var r=n(2492),o=n(7005);t.exports=function t(e,n,i,a,s){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,s))}},2492:(t,e,n)=>{var r=n(6384),o=n(7114),i=n(8351),a=n(6096),s=n(4160),c=n(1469),u=n(4144),l=n(6719),d="[object Arguments]",f="[object Array]",p="[object Object]",v=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,h,y){var b=c(t),m=c(e),w=b?f:s(t),S=m?f:s(e),O=(w=w==d?p:w)==p,_=(S=S==d?p:S)==p,E=w==S;if(E&&u(t)){if(!u(e))return!1;b=!0,O=!1}if(E&&!O)return y||(y=new r),b||l(t)?o(t,e,n,g,h,y):i(t,e,w,n,g,h,y);if(!(1&n)){var I=O&&v.call(t,"__wrapped__"),x=_&&v.call(e,"__wrapped__");if(I||x){var A=I?t.value():t,j=x?e.value():e;return y||(y=new r),h(A,j,n,g,y)}}return!!E&&(y||(y=new r),a(t,e,n,g,h,y))}},7206:t=>{t.exports=function(t){return t}},280:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},9877:t=>{var e=Math.floor,n=Math.random;t.exports=function(t,r){return t+e(n()*(r-t+1))}},4259:t=>{t.exports=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}},5652:(t,e,n)=>{var r=n(8668),o=n(7443),i=n(1196),a=n(4757),s=n(3593),c=n(1814);t.exports=function(t,e,n){var u=-1,l=o,d=t.length,f=!0,p=[],v=p;if(n)f=!1,l=i;else if(d>=200){var g=e?null:s(t);if(g)return c(g);f=!1,l=a,v=new r}else v=e?[]:p;t:for(;++u<d;){var h=t[u],y=e?e(h):h;if(h=n||0!==h?h:0,f&&y==y){for(var b=v.length;b--;)if(v[b]===y)continue t;e&&v.push(y),p.push(h)}else l(v,y,n)||(v!==p&&v.push(y),p.push(h))}return p}},7406:(t,e,n)=>{var r=n(1811),o=n(928),i=n(292),a=n(327);t.exports=function(t,e){return e=r(e,t),null==(t=i(t,e))||delete t[a(o(e))]}},4757:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1811:(t,e,n)=>{var r=n(1469);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},8363:(t,e,n)=>{var r=n(4865),o=n(9465);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var s=-1,c=e.length;++s<c;){var u=e[s],l=i?i(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),a?o(n,u,l):r(n,u,l)}return n}},3593:t=>{t.exports=function(){}},696:(t,e,n)=>{var r=n(8630);t.exports=function(t){return r(t)?void 0:t}},8777:(t,e,n)=>{var r=n(852),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},7114:(t,e,n)=>{var r=n(8668),o=n(2908),i=n(4757);t.exports=function(t,e,n,a,s,c){var u=1&n,l=t.length,d=e.length;if(l!=d&&!(u&&d>l))return!1;var f=c.get(t),p=c.get(e);if(f&&p)return f==e&&p==t;var v=-1,g=!0,h=2&n?new r:void 0;for(c.set(t,e),c.set(e,t);++v<l;){var y=t[v],b=e[v];if(a)var m=u?a(b,y,v,e,t,c):a(y,b,v,t,e,c);if(void 0!==m){if(m)continue;g=!1;break}if(h){if(!o(e,(function(t,e){if(!i(h,e)&&(y===t||s(y,t,n,a,c)))return h.push(e)}))){g=!1;break}}else if(y!==b&&!s(y,b,n,a,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},8351:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6096:(t,e,n)=>{var r=n(8234),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,s){var c=1&n,u=r(t),l=u.length;if(l!=r(e).length&&!c)return!1;for(var d=l;d--;){var f=u[d];if(!(c?f in e:o.call(e,f)))return!1}var p=s.get(t),v=s.get(e);if(p&&v)return p==e&&v==t;var g=!0;s.set(t,e),s.set(e,t);for(var h=c;++d<l;){var y=t[f=u[d]],b=e[f];if(i)var m=c?i(b,y,f,e,t,s):i(y,b,f,t,e,s);if(!(void 0===m?y===b||a(y,b,n,i,s):m)){g=!1;break}h||(h="constructor"==f)}if(g&&!h){var w=t.constructor,S=e.constructor;w==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S||(g=!1)}return s.delete(t),s.delete(e),g}},9021:t=>{t.exports=function(t){return t}},8234:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},6904:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},852:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},5924:(t,e,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},4160:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},6612:t=>{t.exports=function(){return!1}},5726:t=>{t.exports=function(){return!1}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var r=n(8470),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},2117:(t,e,n)=>{var r=n(8470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var r=n(8470);t.exports=function(t){return r(this.__data__,t)>-1}},4705:(t,e,n)=>{var r=n(8470);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},292:t=>{t.exports=function(t){return t}},1814:t=>{t.exports=function(){return[]}},327:t=>{t.exports=function(t){return t}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},7361:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},5694:t=>{t.exports=function(){return!1}},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,n)=>{var r=n(3560),o=n(1780);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},4144:t=>{t.exports=function(){return!1}},1609:(t,e,n)=>{var r=n(280),o=n(4160),i=n(5694),a=n(1469),s=n(8612),c=n(4144),u=n(5726),l=n(6719),d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||l(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(u(t))return!r(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},8446:(t,e,n)=>{var r=n(939);t.exports=function(t,e){return r(t,e)}},3560:(t,e,n)=>{var r=n(4239),o=n(3218);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,n)=>{var r=n(4239),o=n(5924),i=n(7005),a=Function.prototype,s=Object.prototype,c=a.toString,u=s.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},6719:t=>{t.exports=function(){return!1}},928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},7557:(t,e,n)=>{var r=n(9932),o=n(5990),i=n(7406),a=n(1811),s=n(8363),c=n(696),u=n(9021),l=n(6904),d=u((function(t,e){var n={};if(null==t)return n;var u=!1;e=r(e,(function(e){return e=a(e,t),u||(u=e.length>1),e})),s(t,l(t),n),u&&(n=o(n,7,c));for(var d=e.length;d--;)i(n,e[d]);return n}));t.exports=d},3608:(t,e,n)=>{var r=n(9877),o=n(6612),i=n(8601),a=parseFloat,s=Math.min,c=Math.random;t.exports=function(t,e,n){if(n&&"boolean"!=typeof n&&o(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=i(t),void 0===e?(e=t,t=0):e=i(e)),t>e){var u=t;t=e,e=u}if(n||t%1||e%1){var l=c();return s(t+l*(e-t+a("1e-"+((l+"").length-1))),e)}return r(t,e)}},9579:(t,e,n)=>{var r=n(4259),o=n(554);t.exports=function(t,e,n){var i=null==t?0:t.length;return i?(e=n||void 0===e?1:o(e),r(t,(e=i-e)<0?0:e,i)):[]}},8601:t=>{t.exports=function(t){return t}},554:t=>{t.exports=function(t){return t}},4908:(t,e,n)=>{var r=n(5652);t.exports=function(t){return t&&t.length?r(t):[]}},5578:(t,e,n)=>{var r=n(7206),o=n(5652);t.exports=function(t,e){return t&&t.length?o(t,r(e,2)):[]}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ACTION:()=>pa,addAction:()=>ya,addActiveDataAction:()=>ha,addInteraction:()=>Sa,default:()=>ka,getActions:()=>ba,getAllActions:()=>ma,getContext:()=>Da,getGalactusUserProfile:()=>Aa,getGlobalId:()=>ja,getUserProfile:()=>wa,getVersionHash:()=>xa,isCrossdomainDisabled:()=>_a,isCrossdomainFinished:()=>Oa,isInitialized:()=>Ea,isReady:()=>Ia,registerClient:()=>ga,trackPageview:()=>va});const t=Array.isArray,e=function(){if(!arguments.length)return[];var e=arguments[0];return t(e)?e:[e]},o=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1},i=function(t,e){return!(null==t||!t.length)&&o(t,e,0)>-1},a=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1},s=function(t,e){return!(null==t||!t.length)&&o(t,e,0)>-1},c=function(t,n){return t&&t.length?function(t,n,r){var o=-1,c=i,u=t.length,l=!0,d=[],f=d;if(r)l=!1,c=a;else if(u>=200){if(n?null:void 0)return[];l=!1,c=s,f=new e}else f=n?[]:d;t:for(;++o<u;){var p=t[o],v=n?n(p):p;if(p=r||0!==p?p:0,l&&v==v){for(var g=f.length;g--;)if(f[g]===v)continue t;n&&f.push(v),d.push(p)}else c(f,v,r)||(f!==d&&f.push(v),d.push(p))}return d}(t,n):[]};function u(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,s,"next",t)}function s(t){u(i,r,o,a,s,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=function(t,e){return function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(t,e,n){var r=d;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=I(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?v:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=v,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",v="completed",g={};function h(){}function y(){}function b(){}var m={};c(m,i,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(D([])));S&&S!==n&&r.call(S,i)&&(m=S);var O=b.prototype=h.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function I(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:e,done:!0}}return y.prototype=b,c(O,"constructor",b),c(b,"constructor",y),y.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},_(E.prototype),c(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(O),c(O,s,"Generator"),c(O,i,(function(){return this})),c(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(e={exports:{}}),e.exports}(),v=function(){function t(){this.id=t.UNKNOWN_USER,this.language=void 0}var e=t.prototype;return e.reset=function(){this.id=t.UNKNOWN_USER,this.language=void 0},t.getDefault=function(){return new t},t.getAnon=function(){var e=new t;return e.id=t.ANON_USER,e},e.apply=function(e){return e instanceof t&&(this.id=e.id,null!=e&&e.language&&(this.language=e.language)),this},t.fromContext=function(e){return t.getDefault().apply(e)},t.fromTransport=function(e){var n=t.getDefault();if("object"==typeof e&&null!=e&&e.id){var r=e.id;"number"==typeof r?n.id=r:"string"==typeof r&&(n.id=parseInt(r,10)),n.language=null==e?void 0:e.lang}return n},t.fromWindow=function(){var e=window;return null!=e&&e._ulc&&"object"==typeof e._ulc?t.fromTransport(e._ulc):t.getDefault()},e.toTransport=function(){return{id:this.id,lang:this.language}},e.toString=function(){return JSON.stringify(this.toTransport())},e.updateWindow=function(){window._ulc=this.toTransport()},e.toScript=function(){return"window._ulc = "+this.toString()+";"},f(t,[{key:"lang",get:function(){return null==this?void 0:this.language}},{key:"isUnknown",get:function(){return this.id===t.UNKNOWN_USER}},{key:"isAnon",get:function(){return this.isUnknown||this.id===t.ANON_USER}},{key:"anon",get:function(){return this.isAnon}}]),t}();v.UNKNOWN_USER=-1,v.ANON_USER=0;var g,h,y,b={UNKNOWN:"",MEDIAWIKI:"mw",DISCUSSIONS:"dis",TRIVIA:"trivia",F2:"f2",FANHUB:"fanhub",VIDEO:"video",AUTH:"auth"},m=function(){function t(){this.$time=0,this.product=b.UNKNOWN,this.$time=Date.now()}var e=t.prototype;return e.reset=function(){this.product=b.UNKNOWN,this.productId=void 0,this.productVariant=void 0,this.productCategory=void 0,this.page=void 0,this.pageId=void 0,this.pageLanguage=void 0,this.adTags=void 0,this.$time=Date.now()},t.getDefault=function(){return new t},e.zeroTime=function(){return this.$time=0,this},e.apply=function(e){return e instanceof t&&(e.isUnknown||(this.product=e.product),null!=e&&e.productId&&(this.productId=e.productId),null!=e&&e.productVariant&&(this.productVariant=e.productVariant),null!=e&&e.productCategory&&(this.productCategory=e.productCategory),null!=e&&e.page&&(this.page=e.page),null!=e&&e.pageId&&(this.pageId=e.pageId),null!=e&&e.pageLanguage&&(this.pageLanguage=e.pageLanguage),null!=e&&e.adTags&&(this.adTags=e.adTags),null!=e&&e.$time&&"number"==typeof e.$time&&e.$time>0&&(this.$time=e.$time)),this},t.fromContext=function(e){return t.getDefault().apply(e)},t.fromTransport=function(e){var n=t.getDefault();return e.p&&(n.product=e.p,n.productId=null==e?void 0:e.pId,n.productVariant=null==e?void 0:e.pVar,n.productCategory=null==e?void 0:e.pCat,n.page=null==e?void 0:e.pg,n.pageId=null==e?void 0:e.pgId,n.pageLanguage=null==e?void 0:e.pgLang,n.adTags=null==e?void 0:e.adTags,n.$time="number"==typeof e.time&&e.time>0?e.time:Date.now()),n},t.fromWindow=function(){var e=window;return null!=e&&e._plc&&"object"==typeof e._plc?t.fromTransport(e._plc):t.getDefault()},e.toTransport=function(t){void 0===t&&(t=!1);var e={p:this.product,pId:null==this?void 0:this.productId,pVar:null==this?void 0:this.productVariant,pCat:null==this?void 0:this.productCategory,pg:null==this?void 0:this.page,pgId:null==this?void 0:this.pageId,pgLang:null==this?void 0:this.pageLanguage,adTags:null==this?void 0:this.adTags,time:this.time};return t&&(e.time=0),e},e.toString=function(t){return void 0===t&&(t=!1),JSON.stringify(this.toTransport(t))},e.updateWindow=function(t){void 0===t&&(t=!1);var e=window;e._plc=this.toTransport(t),t&&(e._plc.time=Date.now())},e.toScript=function(t){void 0===t&&(t=!1);var e="window._plc = "+this.toString(t)+";";return t&&(e+="window._plc.time = Date.now();"),e},f(t,[{key:"time",get:function(){return this.$time}},{key:"isUnknown",get:function(){return!this.isKnown}},{key:"isKnown",get:function(){return"string"==typeof this.product&&this.product!==b.UNKNOWN}},{key:"isValid",get:function(){return this.isKnown&&this.$time>0}}]),t}();function w(t,e,n){return void 0===e&&(e="/"),void 0===n&&(n={}),fetch(function(t){var e,n,r=null==(e=window)||null==(n=e.location)?void 0:n.hostname;if(r){if(r.endsWith("fandom.com"))return"https://services.fandom.com/"+t;if(r.endsWith("fandom-dev.us"))return"https://services.fandom-dev.us/"+t}return"http://"+t}(t)+e,n).then((function(n){return"opaque"===n.type||n.ok||401===n.status||404===n.status||console.error("fetch Error",{serviceName:t,path:e,response:n}),n.json()}))}function S(){return O.apply(this,arguments)}function O(){return(O=l(p.mark((function t(){var e,n,r;return p.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w("whoami","/",{credentials:"include"});case 3:return n=t.sent,r=null!=(e=null==n?void 0:n.userId)?e:""+v.ANON_USER,t.abrupt("return",parseInt(r,10));case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",v.ANON_USER);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=l(p.mark((function t(){var e;return p.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=v.fromWindow()).isUnknown){t.next=12;break}return t.prev=2,t.next=5,S();case 5:e.id=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(2),console.debug("Failed, falling back to default user context",t.t0),t.abrupt("return",v.getDefault());case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}function E(t){if("object"!=typeof t)return{};for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var o=r[n],i=o[0],a=o[1];a&&(e[i]=a.reduce((function(t,e){return t[e]=1,t}),{}))}return e}function I(t){var e=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return e?e[1]:void 0}function x(){return I("wikia_beacon_id")||""}function A(){return m.fromWindow()}function j(){return v.fromWindow()}!function(t){t.INIT="roots-initial",t.LOADED="roots-loaded"}(g||(g={})),function(t){t.SS_PRE_BOOTSTRAP="ss_pre_bootstrap",t.SS_SDK_START="ss_sdk_start",t.SS_SDK_LOADED="ss_sdk_loaded",t.SS_SDK_READY="ss_sdk_ready",t.SS_CROSS_DOMAIN_READY="ss_cross_domain_ready",t.SS_CROSS_DOMAIN_REGISTER_START="ss_cross_domain_register_start",t.SS_CROSS_DOMAIN_REGISTER_ALL_PAGES_DONE="ss_cross_domain_register_all_pages_done"}(h||(h={})),function(t){t.PF_START="pf_start",t.PF_LOADED="pf_loaded",t.PF_READY="pf_ready"}(y||(y={}));const D=Object.values({SilverSurfer:"silversurfer",PathfinderExperiments:"pf-experiments",ClientSide:"browser-client-",Custom:"custom-"});var k,P;!function(t){t.CATEGORY="category",t.EVENT="event",t.LABEL="label",t.ACTION="action",t.VALUE="value",t.NON_INTERACTIVE="nonInteractive",t.IS_DEBUG="isDebug"}(k||(k={})),function(t){t.EXPERIMENT_VARIANT="experimentVariant",t.SS_VERSION="silverSurferVersion",t.AD_PVUID="pvUID",t.BEACON_ID="beaconId"}(P||(P={}));const C=[...Object.values(P),...Object.values(k)];function R(){var t,e,n;return null!==(n=null===(e=null===(t=null===window||void 0===window?void 0:window.google_tag_manager)||void 0===t?void 0:t.dataLayer)||void 0===e?void 0:e.gtmDom)&&void 0!==n&&n}function N(){R()&&(window.__datalayer_pre=window.__datalayer_pre||[],window.__datalayer_pre.length>0&&(window.__datalayer_pre_interval_id&&window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre.forEach((t=>window.dataLayer.push(t))),window.__datalayer_pre=[]),window.__datalayer_pre_interval_id&&(window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre_interval_id=null))}function T(t){if(t.isDebug=!!t.isDebug,t.event){if(window.dataLayer=window.dataLayer||[],t.category||(t.category=t.event),t.label||(t.label=t.category),t.isDebug){e=t.event,D.some((t=>e.includes(t)))||console.warn("[Tracking] GTM event not caught",t.event);const n=C;Object.keys(t).every((e=>!(!n.includes(e)&&!t.skipValidation&&(console.warn("[Tracking] Element not enabled in DW",e),1))))}return function(t){return window.__datalayer_pre=window.__datalayer_pre||[],R()?(N(),window.dataLayer.push(t)):window.__datalayer_pre.push(t)}(t)}var e;return console.error("[Tracking] missing 'event' field",t),null}function L(){return!!window.location.search.includes("ss_debug")||B()}window.__datalayer_pre_interval_id||R()||(window.__datalayer_pre_interval_id=window.setInterval(N,500));const B=()=>/^localhost/.test(location.hostname)||"127.0.0.1"===location.hostname;function M(t,e){const n=n=>{const r=Object.assign(Object.assign({nonInteractive:!0},t),n);return e(r),r};return n.click=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"click",nonInteractive:!1})),n.impression=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"impression",nonInteractive:!0})),n.hover=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"hover",nonInteractive:!0})),n.loaded=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"loaded",nonInteractive:!0})),n.extend=n=>M(Object.assign(Object.assign({},t),n),e),n}function U(t,e){const n=Object.assign({},t);if(!n.event&&!n.category)throw console.error("[Tracking] Missing event or category field",n),new Error("Missing event or category field");return n.category||(n.category=n.event),n.event||(n.event=n.category),M(n,e)}function F(t){return U(t,T)}function z(t){return`${L()?"dev-":""}${t}`}U({category:"base-tracker"},T);const $="__frontend_utils_consistent_random";function V(){return window[$]||(window[$]=Math.random()),window[$]}const H=F({event:"browser-client-timings"}),G=.005;let W=new Map;function K(t,e){var n,r;W.set(t,e),n=t,r=e,(L()||V()<=G)&&H({category:`timings-event-${n}`,label:r.toString(),action:"timed",value:r})}function q(t){try{const e=Math.round(Date.now()-function(){if(!window.performance&&!window.performance.timeOrigin)throw new Error("Performance value not set");return window.performance.timeOrigin}());return K(t,e),L()&&console.log("Timing",t,e),e}catch(t){console.error("TimingRecord Error",t)}}function J(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Y(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}Object.create,Object.create;var X=n(9579),Q=n.n(X),Z=n(7557),tt=n.n(Z);const et=4,nt={profileId:null,namespaces:{adTags:{},devices:{set:[]},locations:{set:[]},languages:{contentLanguages:[],acceptLanguages:[]}}},rt="silver_surfer_tracking_key_v2",ot="silver_surfer_actions_v2",it="silver_surfer_interactions_v2";const at=t=>`silver-surfer-galactus-fallback-user-profile-v2_${t}`;function st(){return Y(this,void 0,void 0,(function*(){const t=localStorage.getItem(it);return t?JSON.parse(t):{}}))}function ct(){return Y(this,void 0,void 0,(function*(){const t=localStorage.getItem(rt);return t?JSON.parse(t):[]}))}function ut(){return Y(this,void 0,void 0,(function*(){const t=localStorage.getItem(ot);return t?JSON.parse(t):[]}))}const lt=(t,e)=>e.some((e=>t instanceof e));let dt,ft;const pt=new WeakMap,vt=new WeakMap,gt=new WeakMap,ht=new WeakMap,yt=new WeakMap;let bt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return vt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||gt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function mt(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ft||(ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(St(this),t),wt(pt.get(this))}:function(...t){return wt(e.apply(St(this),t))}:function(t,...n){const r=e.call(St(this),t,...n);return gt.set(r,t.sort?t.sort():[t]),wt(r)}:(t instanceof IDBTransaction&&function(t){if(vt.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));vt.set(t,e)}(t),lt(t,dt||(dt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,bt):t);var e}function wt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(wt(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&pt.set(e,t)})).catch((()=>{})),yt.set(e,t),e}(t);if(ht.has(t))return ht.get(t);const e=mt(t);return e!==t&&(ht.set(t,e),yt.set(e,t)),e}const St=t=>yt.get(t),Ot=["get","getKey","getAll","getAllKeys","count"],_t=["put","add","delete","clear"],Et=new Map;function It(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Et.get(e))return Et.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=_t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Ot.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return Et.set(e,i),i}var xt;function At(){return"undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.includes("fandom.com")?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)||["us"])[0]+"/"}xt=bt,bt={...xt,get:(t,e,n)=>It(t,e)||xt.get(t,e,n),has:(t,e)=>!!It(t,e)||xt.has(t,e)};const jt={DEBUG:"ss_debug",BRANCH:"ss_branch_deploy",CANARY:"ss_canary",ENABLED_PATHFINDER_MODULE:"ss_pathfinder_enable",FORCED_PATHFINDER:"ss_pathfinder_forced",FORCED_BUCKETING:"ss_pathfinder_force_bucket"},Dt=B,kt=(null==="c811feb92e7\n"?void 0:"c811feb92e7\n".replace(/\n/g,""))||"local",Pt=!0,Ct=t=>window.location.search.includes(t),Rt=()=>Ct(`${jt.DEBUG}=true`);function Nt(){}const Tt=Date.now(),Lt=(t,e,n=[])=>(r,...o)=>((t,e,n,r,...o)=>{const i=function(t){return"error"===t?console.error:"debug"===t?Rt()||Dt()?console.debug:Nt:console.log}(t),a=`%c${e} | ${function(){var t,e;return((Date.now()-(null!==(e=null===(t=window.performance)||void 0===t?void 0:t.timeOrigin)&&void 0!==e?e:Tt))/1e3).toFixed(4)}()}s | ${r}`;o.length?i(a,n,...o):i(a,n)})(e,t,n.join(";"),r,...o);function Bt(t){return["background-color: silver;","padding: 2px 4px","border-radius: 2px",`color: ${t}`]}const Mt={info:Lt("SilverSurfer","info",Bt("#000")),debug:Lt("SilverSurfer","debug",Bt("#330")),error:Lt("SilverSurfer","error",Bt("#300"))},Ut=F({event:"browser-client-metric"}),Ft=V();function zt(t,e,n,r){try{return n<Ft&&!L()?null:Ut({category:z(`browser-client-metric-${t}`),label:r,value:null!=e?e:t,action:"metric"})}catch(t){return null}}const $t="silver-surfer",Vt=6,Ht="page-view-table",Gt="actions-table",Wt="interactions-table",Kt="current",qt="galactus-fallback-user-profile-table",Jt="active-data-table";let Yt=!1;function Xt(){return Y(this,void 0,void 0,(function*(){if(!Yt)try{return yield function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),s=wt(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(wt(a.result),t.oldVersion,t.newVersion,wt(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),s}($t,Vt,{upgrade(t,e,n,r){t.objectStoreNames.contains(Ht)||t.createObjectStore(Ht),t.objectStoreNames.contains(qt)||t.createObjectStore(qt),t.objectStoreNames.contains(Gt)||t.createObjectStore(Gt,{autoIncrement:!0}),t.objectStoreNames.contains(Wt)||t.createObjectStore(Wt),t.objectStoreNames.contains(Jt)||t.createObjectStore(Jt)},blocked(){},blocking(){},terminated(){}})}catch(t){Mt.error("Cannot access indexedDB:",t),zt("cannot-access-indexeddb",1,1),Yt=!0}}))}const Qt=t=>`user-profile-${t}`;var Zt;!function(t){t.IndexedDB="indexeddb",t.LocalStorage="localstorage"}(Zt||(Zt={}));const te={[Zt.IndexedDB]:200,[Zt.LocalStorage]:100},ee={[Zt.IndexedDB]:500,[Zt.LocalStorage]:200};function ne(){try{return!!(null===window||void 0===window?void 0:window.localStorage)}catch(t){return!1}}function re(){try{return!!(null===window||void 0===window?void 0:window.indexedDB)}catch(t){return!1}}function oe(t){return Y(this,void 0,void 0,(function*(){const e=!!re()&&(yield function(t){return Y(this,void 0,void 0,(function*(){const e=yield Xt();return(yield null==e?void 0:e.put(Wt,t,Kt))===Kt}))}(t)),n=!!ne()&&(yield function(t){return Y(this,void 0,void 0,(function*(){try{localStorage.setItem(it,JSON.stringify(t))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Mt.debug("Local interactions updated from cross domain"):Mt.error("Failed to update local interactions"),r}))}function ie(){return Y(this,void 0,void 0,(function*(){let t=-1,e=-1;if(re())try{t=yield function(){return Y(this,void 0,void 0,(function*(){return 4*[yield ct(),yield ut(),yield st()].map((t=>JSON.stringify(t).length)).reduce(((t,e)=>t+e),0)}))}()}catch(t){Mt.debug("Error while getting localStorage size",t)}if(ne())try{e=yield function(){return Y(this,void 0,void 0,(function*(){const t=yield Xt();let e=0,n=yield null==t?void 0:t.transaction(Ht).store.openCursor();for(;n;)e+=JSON.stringify(n.value).length,n=yield n.continue();let r=yield null==t?void 0:t.transaction(Gt).store.openCursor();for(;r;)e+=JSON.stringify(r.value).length,r=yield r.continue();return 4*e}))}()}catch(t){Mt.debug("Error while getting indexedDB size",t)}return{localStorageSize:t,indexedDBSize:e}}))}function ae(t,e,n,r={}){console.error("logErrorEvent",{client:t,clientVersion:e,name:n,data:r})}Math.max(ee[Zt.LocalStorage],te[Zt.LocalStorage]);const se=(t,e)=>(n,r={})=>ae(t,e,n,r),ce=(t,e)=>(n,r)=>ae(t,e,n,(({ok:t,redirected:e,status:n,statusText:r,type:o,url:i})=>({ok:t,redirected:e,status:n,statusText:r,type:o,url:i}))(r));se("silver-surfer",kt);const ue=ce("silver-surfer",kt);function le(t,e,n){return void 0===n&&(n={}),fetch(e,n).then((n=>("opaque"===n.type||n.ok||401===n.status||404===n.status||("function"==typeof t?t(e,n):console.error("fetchWithLogging Error",{url:e,response:n})),n)))}const de=t=>(e,n={})=>le(t,At()+e,Object.assign({mode:"cors",credentials:"include"},n)),fe=t=>(e,n,r={})=>le(t,At()+e,Object.assign({method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"include",body:JSON.stringify(n)},r)),pe=de(ue);fe(ue);var ve=n(9996),ge=n.n(ve),he=function(){return he=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},he.apply(this,arguments)},ye={channelId:"default",host:window,coordinatorHost:window.top},be={connect:"connect",connected:"connected"},me="@wikia/post-quecast";function we(t){return t.channelId&&t.libId===me&&t.action&&function(t){return"string"==typeof t.type&&"number"==typeof t.timestamp}(t.action)}function Se(t){return!t.data.private}function Oe(t,e){return t.data.channelId===e}function _e(t){return t.data.action}var Ee=function(){function t(){}return t.make=function(t){return function(t){var e;return t.host===t.coordinatorHost&&!!(null===(e=t.coordinatorHost[me])||void 0===e?void 0:e.callbackConnector)}(t)?t.coordinatorHost[me].callbackConnector:new xe({senderHost:t.coordinatorHost,listenerHost:t.host})},t}(),Ie=function(){function t(t){this.coordinatorHost=t,this.callbacks=[]}return t.prototype.dispatch=function(t){var e=this;if(!we(t))throw new Error("Incorrect object type. Expected PostMessageData, but got "+t);this.callbacks.forEach((function(n){return n({data:t,source:e.coordinatorHost})}))},t.prototype.addListener=function(t){this.callbacks.push(t)},t.prototype.removeListener=function(t){this.callbacks=this.callbacks.filter((function(e){return e!==t}))},t}(),xe=function(){function t(t){this.options=t,this.map=new Map}return t.prototype.dispatch=function(t){if(!we(t))throw new Error("Incorrect object type. Expected PostMessageData, but got "+t);this.options.senderHost.postMessage(t,"*")},t.prototype.addListener=function(t){var e=function(e){var n;(n=e)&&n.source&&n.data&&we(n.data)&&t(e)};this.map.set(t,e),this.options.listenerHost.addEventListener("message",e)},t.prototype.removeListener=function(t){var e=this.map.get(t);this.options.listenerHost.removeEventListener("message",e),this.map.delete(t)},t}(),Ae=function(){function t(t){this.callbacks=[],this.history=[],this.channelId=t.channelId,this.connector=Ee.make(t),this.setupActions(),this.setupConnection()}return t.prototype.setupActions=function(){this.getHistory(),this.listenEvent()},t.prototype.getHistory=function(){var t=this,e=function(n){if(Oe(n,t.channelId)&&function(t){return!!t.data.private}(n)){var r=_e(n);(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.some((function(e){return t.type===e}))})(r,be.connected)&&(t.connector.removeListener(e),t.handleActions.apply(t,r.history))}};this.connector.addListener(e)},t.prototype.listenEvent=function(){var t=this;this.connector.addListener((function(e){if(Oe(e,t.channelId)&&Se(e)){var n=_e(e);t.handleActions(n)}}))},t.prototype.handleActions=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(t=this.history).push.apply(t,n),n.forEach((function(t){return e.callbacks.forEach((function(e){return e(t)}))}))},t.prototype.setupConnection=function(){this.connector.dispatch({action:{type:be.connect,timestamp:Date.now()},channelId:this.channelId,private:!0,libId:me})},t.prototype.addListener=function(t){this.history.forEach((function(e){return t(e)})),this.callbacks.push(t)},t.prototype.removeListener=function(t){this.callbacks=this.callbacks.filter((function(e){return e!==t}))},t}(),je=function(){function t(t){void 0===t&&(t={});var e=he(he({},ye),t);this.channelId=e.channelId,this.connector=Ee.make(e)}return t.prototype.dispatch=function(t){this.connector.dispatch({action:he(he({},t),{timestamp:Date.now()}),channelId:this.channelId,private:!0,libId:me})},t}(),De=function(){function t(t){void 0===t&&(t={});var e=he(he({},ye),t);this.transmitter=new je(e),this.receiver=new Ae(e)}return t.prototype.dispatch=function(t){this.transmitter.dispatch(t)},t.prototype.addListener=function(t){this.receiver.addListener(t)},t.prototype.removeListener=function(t){this.receiver.removeListener(t)},t}(),ke=function(){function t(t,e){this.channelId=t,this.connectors=new Map,this.history=[],this.connectors.set(e,e[me].callbackConnector)}return t.prototype.addConnection=function(t){this.ensureConnector(t).dispatch({action:this.createConnectedAction(),private:!0,channelId:this.channelId,libId:me})},t.prototype.createConnectedAction=function(){return{type:be.connected,history:this.history,timestamp:Date.now()}},t.prototype.broadcast=function(t){var e=this;this.history.push(t),this.connectors.forEach((function(n){n.dispatch({action:t,channelId:e.channelId,libId:me})}))},t.prototype.ensureConnector=function(t){return this.connectors.has(t)||this.connectors.set(t,new xe({senderHost:t,listenerHost:t})),this.connectors.get(t)},t}(),Pe=function(){function t(t){this.coordinatorHost=t,this.channels=new Map,this.callbackConnector=new Ie(t),this.postMessageConnector=new xe({senderHost:t,listenerHost:t})}return t.prototype.init=function(){var t=this,e=function(e){Se(e)||(t.handleConnect(e),t.handleBroadcast(e))};this.callbackConnector.addListener(e),this.postMessageConnector.addListener(e)},t.prototype.handleConnect=function(t){(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.some((function(e){return t.data.action.type===e}))})(t,be.connect)&&this.ensureChannel(t.data.channelId).addConnection(t.source)},t.prototype.handleBroadcast=function(t){(function(t){return!Object.values(be).some((function(e){return t.data.action.type===e}))})(t)&&this.ensureChannel(t.data.channelId).broadcast(t.data.action)},t.prototype.ensureChannel=function(t){return this.channels.has(t)||this.channels.set(t,new ke(t,this.coordinatorHost)),this.channels.get(t)},t}();class Ce{constructor(){this.history=new Map,function(t){if(void 0===t&&(t=window),!t[me]){var e=new Pe(t);e.init(),t[me]=e}}(),this.communicator=new De}dispatch(t){this.communicator.dispatch(Object.assign(Object.assign({},t),{__global:!0}))}on(t,e){this.communicator.addListener((n=>this.run(n,t,e)))}once(t,e){this.communicator.addListener((n=>this.runOnce(n,t,e)))}run(t,e,n){this.ofType(t,e)&&n(t)}runOnce(t,e,n){if(this.ofType(t,e)){if(this.history.has(e))return n(t);this.history.set(e,!0),n(t)}}ofType(t,e){return t.type===e}}let Re=null;function Ne(){return null===Re&&(Re=new Ce),Re}const Te="[AdEngine] Ad Slot loaded",Le="[AdEngine] UAP Load status",Be="[AdEngine] Ad clicked",Me="[AdEngine] BAB detection finished",Ue=function(){return Y(this,void 0,void 0,(function*(){if("boolean"==typeof(null===window||void 0===window?void 0:window.__f_optin))return Promise.resolve(window.__f_optin);const t=Ne();return new Promise(((e,n)=>{t.once("[AdEngine OptIn] set opt in",(({geoRequiresConsent:t,geoRequiresSignal:r,gdprConsent:o,ccpaSignal:i})=>{t&&o||r&&!i||!r&&!t?e(!0):n(!1)}))}))}))};function Fe(t){const e=new RegExp("(googlebot/|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i"),n="string"==typeof t?t:null===navigator||void 0===navigator?void 0:navigator.userAgent;return e.test(n)}function ze(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $e(t){return!!t&&!!t[kn]}function Ve(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Pn}(t)||Array.isArray(t)||!!t[Dn]||!!t.constructor[Dn]||Ye(t)||Xe(t))}function He(t){return $e(t)||ze(23,t),t[kn].t}function Ge(t,e,n){void 0===n&&(n=!1),0===We(t)?(n?Object.keys:Cn)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function We(t){var e=t[kn];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Ye(t)?2:Xe(t)?3:0}function Ke(t,e){return 2===We(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function qe(t,e,n){var r=We(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function Je(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function Ye(t){return In&&t instanceof Map}function Xe(t){return xn&&t instanceof Set}function Qe(t){return t.o||t.t}function Ze(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Rn(t);delete e[kn];for(var n=Cn(e),r=0;r<n.length;r++){var o=n[r],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function tn(t,e){return void 0===e&&(e=!1),nn(t)||$e(t)||!Ve(t)||(We(t)>1&&(t.set=t.add=t.clear=t.delete=en),Object.freeze(t),e&&Ge(t,(function(t,e){return tn(e,!0)}),!0)),t}function en(){ze(2)}function nn(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function rn(t){var e=Nn[t];return e||ze(18,t),e}function on(){return _n}function an(t,e){e&&(rn("Patches"),t.u=[],t.s=[],t.v=e)}function sn(t){cn(t),t.p.forEach(ln),t.p=null}function cn(t){t===_n&&(_n=t.l)}function un(t){return _n={p:[],l:_n,h:t,m:!0,_:0}}function ln(t){var e=t[kn];0===e.i||1===e.i?e.j():e.O=!0}function dn(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||rn("ES5").S(e,t,r),r?(n[kn].P&&(sn(e),ze(4)),Ve(t)&&(t=fn(e,t),e.l||vn(e,t)),e.u&&rn("Patches").M(n[kn].t,t,e.u,e.s)):t=fn(e,n,[]),sn(e),e.u&&e.v(e.u,e.s),t!==jn?t:void 0}function fn(t,e,n){if(nn(e))return e;var r=e[kn];if(!r)return Ge(e,(function(o,i){return pn(t,r,e,o,i,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return vn(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=Ze(r.k):r.o;Ge(3===r.i?new Set(o):o,(function(e,i){return pn(t,r,o,e,i,n)})),vn(t,o,!1),n&&t.u&&rn("Patches").R(r,n,t.u,t.s)}return r.o}function pn(t,e,n,r,o,i){if($e(o)){var a=fn(t,o,i&&e&&3!==e.i&&!Ke(e.D,r)?i.concat(r):void 0);if(qe(n,r,a),!$e(a))return;t.m=!1}if(Ve(o)&&!nn(o)){if(!t.h.F&&t._<1)return;fn(t,o),e&&e.A.l||vn(t,o)}}function vn(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&tn(e,n)}function gn(t,e){var n=t[kn];return(n?Qe(n):t)[e]}function hn(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function yn(t){t.P||(t.P=!0,t.l&&yn(t.l))}function bn(t){t.o||(t.o=Ze(t.t))}function mn(t,e,n){var r=Ye(e)?rn("MapSet").N(e,n):Xe(e)?rn("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:on(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},o=r,i=Tn;n&&(o=[r],i=Ln);var a=Proxy.revocable(o,i),s=a.revoke,c=a.proxy;return r.k=c,r.j=s,c}(e,n):rn("ES5").J(e,n);return(n?n.A:on()).p.push(r),r}function wn(t){return $e(t)||ze(22,t),function t(e){if(!Ve(e))return e;var n,r=e[kn],o=We(e);if(r){if(!r.P&&(r.i<4||!rn("ES5").K(r)))return r.t;r.I=!0,n=Sn(e,o),r.I=!1}else n=Sn(e,o);return Ge(n,(function(e,o){r&&function(t,e){return 2===We(t)?t.get(e):t[e]}(r.t,e)===o||qe(n,e,t(o))})),3===o?new Set(n):n}(t)}function Sn(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Ze(t)}var On,_n,En="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),In="undefined"!=typeof Map,xn="undefined"!=typeof Set,An="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,jn=En?Symbol.for("immer-nothing"):((On={})["immer-nothing"]=!0,On),Dn=En?Symbol.for("immer-draftable"):"__$immer_draftable",kn=En?Symbol.for("immer-state"):"__$immer_state",Pn=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Cn="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Rn=Object.getOwnPropertyDescriptors||function(t){var e={};return Cn(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},Nn={},Tn={get:function(t,e){if(e===kn)return t;var n=Qe(t);if(!Ke(n,e))return function(t,e,n){var r,o=hn(e,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!Ve(r)?r:r===gn(t.t,e)?(bn(t),t.o[e]=mn(t.A.h,r,t)):r},has:function(t,e){return e in Qe(t)},ownKeys:function(t){return Reflect.ownKeys(Qe(t))},set:function(t,e,n){var r=hn(Qe(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var o=gn(Qe(t),e),i=null==o?void 0:o[kn];if(i&&i.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(Je(n,o)&&(void 0!==n||Ke(t.t,e)))return!0;bn(t),yn(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==gn(t.t,e)||e in t.t?(t.D[e]=!1,bn(t),yn(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Qe(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){ze(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){ze(12)}},Ln={};Ge(Tn,(function(t,e){Ln[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Ln.deleteProperty=function(t,e){return Ln.set.call(this,t,e,void 0)},Ln.set=function(t,e,n){return Tn.set.call(this,t[0],e,n,t[0])};var Bn=function(){function t(t){var e=this;this.g=An,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var o=n;n=t;var i=e;return function(t){var e=this;void 0===t&&(t=o);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return i.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(a))}))}}var a;if("function"!=typeof n&&ze(6),void 0!==r&&"function"!=typeof r&&ze(7),Ve(t)){var s=un(e),c=mn(e,t,void 0),u=!0;try{a=n(c),u=!1}finally{u?sn(s):cn(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return an(s,r),dn(t,s)}),(function(t){throw sn(s),t})):(an(s,r),dn(a,s))}if(!t||"object"!=typeof t){if(void 0===(a=n(t))&&(a=t),a===jn&&(a=void 0),e.F&&tn(a,!0),r){var l=[],d=[];rn("Patches").M(t,a,l,d),r(l,d)}return a}ze(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(o))}))};var r,o,i=e.produce(t,n,(function(t,e){r=t,o=e}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(t){return[t,r,o]})):[i,r,o]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){Ve(t)||ze(8),$e(t)&&(t=wn(t));var e=un(this),n=mn(this,t,void 0);return n[kn].C=!0,cn(e),n},e.finishDraft=function(t,e){var n=(t&&t[kn]).A;return an(n,e),dn(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!An&&ze(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var o=rn("Patches").$;return $e(t)?o(t,e):this.produce(t,(function(t){return o(t,e)}))},t}(),Mn=new Bn,Un=Mn.produce;Mn.produceWithPatches.bind(Mn),Mn.setAutoFreeze.bind(Mn),Mn.setUseProxies.bind(Mn),Mn.applyPatches.bind(Mn),Mn.createDraft.bind(Mn),Mn.finishDraft.bind(Mn);const Fn=Un;function zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(n),!0).forEach((function(e){zn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Gn="function"==typeof Symbol&&Symbol.observable||"@@observable",Wn=function(){return Math.random().toString(36).substring(7).split("").join(".")},Kn={INIT:"@@redux/INIT"+Wn(),REPLACE:"@@redux/REPLACE"+Wn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Wn()}};function qn(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Hn(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Hn(1));return n(qn)(t,e)}if("function"!=typeof t)throw new Error(Hn(2));var o=t,i=e,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function l(){if(c)throw new Error(Hn(3));return i}function d(t){if("function"!=typeof t)throw new Error(Hn(4));if(c)throw new Error(Hn(5));var e=!0;return u(),s.push(t),function(){if(e){if(c)throw new Error(Hn(6));e=!1,u();var n=s.indexOf(t);s.splice(n,1),a=null}}}function f(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error(Hn(7));if(void 0===t.type)throw new Error(Hn(8));if(c)throw new Error(Hn(9));try{c=!0,i=o(i,t)}finally{c=!1}for(var e=a=s,n=0;n<e.length;n++)(0,e[n])();return t}return f({type:Kn.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error(Hn(10));o=t,f({type:Kn.REPLACE})}})[Gn]=function(){var t,e=d;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(Hn(11));function n(){t.next&&t.next(l())}return n(),{unsubscribe:e(n)}}})[Gn]=function(){return this},t},r}function Jn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function Yn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(Hn(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=e.map((function(t){return t(o)}));return r=Jn.apply(void 0,i)(n.dispatch),Vn(Vn({},n),{},{dispatch:r})}}}function Xn(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(o){return"function"==typeof o?o(n,r,t):e(o)}}}}var Qn=Xn();Qn.withExtraArgument=Xn;const Zn=Qn;var tr,er=(tr=function(t,e){return tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},tr(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}tr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),nr=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},rr=Object.defineProperty,or=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),ir=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,sr=function(t,e,n){return e in t?rr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},cr=function(t,e){for(var n in e||(e={}))ir.call(e,n)&&sr(t,n,e[n]);if(or)for(var r=0,o=or(e);r<o.length;r++)n=o[r],ar.call(e,n)&&sr(t,n,e[n]);return t},ur="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Jn:Jn.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var lr=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o}return er(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,nr([void 0],t[0].concat(this)))):new(e.bind.apply(e,nr([void 0],t.concat(this))))},e}(Array);function dr(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var o=e.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return cr(cr({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function fr(t){var e,n={},r=[],o={addCase:function(t,e){var r="string"==typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,o},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),o},addDefaultCase:function(t){return e=t,o}};return t(o),[n,r,e]}function pr(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof t.initialState?t.initialState:Fn(t.initialState,(function(){})),o=t.reducers||{},i=Object.keys(o),a={},s={},c={};function u(){var e="function"==typeof t.extraReducers?fr(t.extraReducers):[t.extraReducers],n=e[0],o=void 0===n?{}:n,i=e[1],a=void 0===i?[]:i,c=e[2],u=void 0===c?void 0:c,l=cr(cr({},o),s);return function(t,e,n,r){void 0===n&&(n=[]);var o,i="function"==typeof e?fr(e):[e,n,r],a=i[0],s=i[1],c=i[2];if(function(t){return"function"==typeof t}(t))o=function(){return Fn(t(),(function(){}))};else{var u=Fn(t,(function(){}));o=function(){return u}}function l(t,e){void 0===t&&(t=o());var n=nr([a[e.type]],s.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[c]),n.reduce((function(t,n){if(n){var r;if($e(t))return void 0===(r=n(t,e))?t:r;if(Ve(t))return Fn(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return l.getInitialState=o,l}(r,l,a,u)}return i.forEach((function(t){var n,r,i=o[t],u=e+"/"+t;"reducer"in i?(n=i.reducer,r=i.prepare):n=i,a[t]=n,s[u]=n,c[t]=r?dr(u,r):dr(u)})),{name:e,reducer:function(t,e){return n||(n=u()),n(t,e)},actions:c,caseReducers:a,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}function vr(t){setTimeout(t,1)}!function(){function t(t,e){var n=o[t];return n?n.enumerable=e:o[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[kn];return Tn.get(e,t)},set:function(e){var n=this[kn];Tn.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var o=t[e][kn];if(!o.P)switch(o.i){case 5:r(o)&&yn(o);break;case 4:n(o)&&yn(o)}}}function n(t){for(var e=t.t,n=t.k,r=Cn(n),o=r.length-1;o>=0;o--){var i=r[o];if(i!==kn){var a=e[i];if(void 0===a&&!Ke(e,i))return!0;var s=n[i],c=s&&s[kn];if(c?c.t!==a:!Je(s,a))return!0}}var u=!!e[kn];return r.length!==Cn(e).length+(u?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var o={};!function(t,e){Nn[t]||(Nn[t]=e)}("ES5",{J:function(e,n){var r=Array.isArray(e),o=function(e,n){if(e){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,t(o,!0));return r}var i=Rn(n);delete i[kn];for(var a=Cn(i),s=0;s<a.length;s++){var c=a[s];i[c]=t(c,e||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(n),i)}(r,e),i={i:r?5:4,A:n?n.A:on(),P:!1,I:!1,D:{},l:n,t:e,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,kn,{value:i,writable:!0}),o},S:function(t,n,o){o?$e(n)&&n[kn].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[kn];if(n){var o=n.t,i=n.k,a=n.D,s=n.i;if(4===s)Ge(i,(function(e){e!==kn&&(void 0!==o[e]||Ke(o,e)?a[e]||t(i[e]):(a[e]=!0,yn(n)))})),Ge(o,(function(t){void 0!==i[t]||Ke(i,t)||(a[t]=!1,yn(n))}));else if(5===s){if(r(n)&&(yn(n),a.length=!0),i.length<o.length)for(var c=i.length;c<o.length;c++)a[c]=!1;else for(var u=o.length;u<i.length;u++)a[u]=!0;for(var l=Math.min(i.length,o.length),d=0;d<l;d++)i.hasOwnProperty(d)||(a[d]=!0),void 0===a[d]&&t(i[d])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}();var gr=n(7361),hr=n.n(gr),yr=n(3608),br=n.n(yr);const mr="www.fandom.com",wr={[b.UNKNOWN]:[],[b.MEDIAWIKI]:["2350603","174","38969","4396","159","130814","2180","105","2237"],[b.DISCUSSIONS]:[],[b.TRIVIA]:[],[b.FANHUB]:[],[b.VIDEO]:[],[b.F2]:[]};function Sr(t){return!(t<1)||br()(0,100)<=100*t}var Or;function _r(t,e){return Mt.debug(`App state changed: ${t}->${e}`),e}!function(t){t.New="new",t.Starting="starting",t.Delayed="delayed",t.Ready="ready"}(Or||(Or={}));const Er=pr({name:"AppSlice",initialState:{state:Or.New,config:{sendDebugLog:Rt()||Sr(hr()(window,"_ss.sendDebugLogRate",.01)),sendGalactusRequest:Rt()||Dt()||Sr(hr()(window,"_ss.sendGalactusRequestRate",1)),sendTracking:function(){const t=A(),e=wr[t.product],n=null==e?void 0:e.includes(t.productId);return Sr(hr()(window,"_ss.sendTrackingRate",n?1:0))}(),disableCrossdomain:Ct("ss_no_crossdomain=true")||function(){var t;return!!Fe()||((null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.host)===mr?(Mt.debug("Cross domain is not needed for fandom.com"),!0):hr()(window,"_ss.disableCrossdomain",!1))}(),manualPageview:Dt()&&Ct("ss_no_pageview=true")||function(){const t=hr()(window,"_ss.manualPageview",!1),e=m.fromWindow();let n=!1;return e.isValid||(Mt.debug("Page context is not valid! Assuming lazy load (need manual PV trigger)",e),n=!0),t||n}()},clients:[]},reducers:{starting:t=>{t.state!==Or.New&&t.state!==Or.Delayed||(t.state=_r(t.state,Or.Starting))},delayed:t=>{t.state===Or.New&&(t.state=_r(t.state,Or.Delayed))},ready:t=>{t.state===Or.Starting&&(t.state=_r(t.state,Or.Ready))},addClient:(t,e)=>{const n=e.payload;t.clients.push(n)},reboot(t){if(t.state===Or.Ready){const e=t.clients.map((t=>null==t?void 0:t.onReboot)).filter(Boolean);vr((()=>e.forEach((t=>t()))))}}}}),Ir=Er.actions,{starting:xr,ready:Ar,delayed:jr,addClient:Dr,reboot:kr}=Er.actions,Pr=Er.reducer,Cr=pr({name:"ContextSlice",initialState:{user:v.getDefault(),page:m.getDefault(),adBlockDetected:null,adSlots:{}},reducers:{updateUser:(t,e)=>{t.user=e.payload},updatePage:(t,e)=>{t.page=e.payload},adSlotUpdate(t,e){t.adSlots[e.payload.name]=e.payload.status},adBlockDetected:(t,e)=>{t.adBlockDetected=e.payload,Mt.debug("Feature: AdBlock Detected",t.adBlockDetected)}}}),{updateUser:Rr,updatePage:Nr,adSlotUpdate:Tr,adBlockDetected:Lr}=(Cr.actions,Cr.actions),Br=Cr.reducer;var Mr,Ur,Fr;(Fr=Mr||(Mr={})).Request="CrossDomain::Register::Request",Fr.Response="CrossDomain::Register::Response",function(t){t.Off="off",t.Initializing="initializing",t.Ready="ready"}(Ur||(Ur={}));const zr="2";function $r(t){return{id:`${t.productId}_${t.pageId}_${t.time}`,context:t.toTransport(),time:t.time,version:zr}}function Vr(t){if("1"===(null==t?void 0:t.version)){const e=t;return m.fromTransport({p:b.MEDIAWIKI,pCat:e.vertical,pId:e.communityId,pgId:e.pageId,time:e.time})}if((null==t?void 0:t.version)!==zr)return m.getDefault();const e=t;return m.fromTransport(e.context)}const Hr=pr({name:"BrowserStorageSlice",initialState:{session:{interactions:{},actions:[],pages:[]},history:{interactions:{},actions:[],pages:[]},serviceCache:{galactusUserProfile:{},activeData:{}},local:{status:Ur.Initializing,size:{localStorageSize:-1,indexedDBSize:-1}},crossdomain:{status:Ur.Initializing,statusErrorMessage:null,size:{localStorageSize:-1,indexedDBSize:-1},pagesFinished:!1,actionsFinished:!1,interactionsFinished:!1}},reducers:{cacheGalactusUserProfile:(t,e)=>{t.serviceCache.galactusUserProfile[e.payload.beaconId]=e.payload.profile},cacheActiveData:(t,e)=>{t.serviceCache.activeData=e.payload.activeData},crossdomainStatus:(t,e)=>{var n;const r=e.payload.status;t.crossdomain.status!=Ur.Ready&&(t.crossdomain.status=r,t.crossdomain.statusErrorMessage=r===Ur.Off?null===(n=e.payload)||void 0===n?void 0:n.statusErrorMessage:"")},sessionPageViewSaved:(t,e)=>{t.session.pages.push(Vr(e.payload))},sessionActionSaved:(t,e)=>{t.session.actions.push(e.payload)},sessionAddInteraction:(t,e)=>{var n;const{interactions:r}=t.session,o=null!==(n=r[e.payload])&&void 0!==n?n:0;r[e.payload]=o+1,t.session.interactions=r},updateCrossdomainInteractions:(t,e)=>{t.history.interactions=e.payload,t.crossdomain.interactionsFinished=!0,t.crossdomain.status=Ur.Ready},updateCrossdomainActions:(t,e)=>{t.history.actions=e.payload,t.crossdomain.actionsFinished=!0,t.crossdomain.status=Ur.Ready},updateCrossdomainPages:(t,e)=>{t.history.pages=e.payload.map(Vr),t.crossdomain.pagesFinished=!0,t.crossdomain.status=Ur.Ready},updateCrossdomainSize:(t,e)=>{t.crossdomain.size=e.payload,t.crossdomain.status=Ur.Ready},updateLocalHistory:(t,e)=>{var n,r,o,i;t.history.interactions=e.payload.interactions,t.history.pages=null!==(r=null===(n=e.payload.pages)||void 0===n?void 0:n.map(Vr))&&void 0!==r?r:[],t.history.actions=null!==(i=null===(o=e.payload)||void 0===o?void 0:o.actions)&&void 0!==i?i:[],t.local.status=Ur.Ready},updateLocalStorageSize:(t,e)=>{t.local.size=e.payload}}}),{cacheGalactusUserProfile:Gr,cacheActiveData:Wr,crossdomainStatus:Kr,sessionPageViewSaved:qr,sessionActionSaved:Jr,sessionAddInteraction:Yr,updateCrossdomainSize:Xr,updateCrossdomainPages:Qr,updateCrossdomainActions:Zr,updateCrossdomainInteractions:to,updateLocalHistory:eo,updateLocalStorageSize:no}=(Hr.actions,Hr.actions),ro=function(t){var e,n=function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,new lr);return n&&(function(t){return"boolean"==typeof t}(n)?r.push(Zn):r.push(Zn.withExtraArgument(n.extraArgument))),r}(t)},r=t||{},o=r.reducer,i=void 0===o?void 0:o,a=r.middleware,s=void 0===a?n():a,c=r.devTools,u=void 0===c||c,l=r.preloadedState,d=void 0===l?void 0:l,f=r.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)e=i;else{if(!function(t){if("object"!=typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var o=e[r];"function"==typeof t[o]&&(n[o]=t[o])}var i,a=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:Kn.INIT}))throw new Error(Hn(12));if(void 0===n(void 0,{type:Kn.PROBE_UNKNOWN_ACTION()}))throw new Error(Hn(13))}))}(n)}catch(t){i=t}return function(t,e){if(void 0===t&&(t={}),i)throw i;for(var r=!1,o={},s=0;s<a.length;s++){var c=a[s],u=n[c],l=t[c],d=u(l,e);if(void 0===d)throw e&&e.type,new Error(Hn(14));o[c]=d,r=r||d!==l}return(r=r||a.length!==Object.keys(t).length)?o:t}}(i)}var v=s;"function"==typeof v&&(v=v(n));var g=Yn.apply(void 0,v),h=Jn;u&&(h=ur(cr({trace:!1},"object"==typeof u&&u)));var y=[g];return Array.isArray(p)?y=nr([g],p):"function"==typeof p&&(y=p(y)),qn(e,d,h.apply(void 0,y))}({reducer:{App:Pr,Context:Br,BrowserStorage:Hr.reducer},middleware:t=>t({serializableCheck:{ignoredPaths:["App.clients","Context.user","Context.page","BrowserStorage.session.pages","BrowserStorage.history.pages"],ignoredActions:["AppSlice/addClient","ContextSlice/updateUser","ContextSlice/updatePage"]}}),devTools:{name:"SilverSurfer",trace:Rt()}}),oo=ro;var io=n(4908),ao=n.n(io),so="NOT_FOUND",co=function(t,e){return t===e};function uo(t,e){var n,r,o="object"==typeof e?e:{equalityCheck:e},i=o.equalityCheck,a=void 0===i?co:i,s=o.maxSize,c=void 0===s?1:s,u=o.resultEqualityCheck,l=function(t){return function(e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}}(a),d=1===c?(n=l,{get:function(t){return r&&n(r.key,t)?r.value:so},put:function(t,e){r={key:t,value:e}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}):function(t,e){var n=[];function r(t){var r=n.findIndex((function(n){return e(t,n.key)}));if(r>-1){var o=n[r];return r>0&&(n.splice(r,1),n.unshift(o)),o.value}return so}return{get:r,put:function(e,o){r(e)===so&&(n.unshift({key:e,value:o}),n.length>t&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(c,l);function f(){var e=d.get(arguments);if(e===so){if(e=t.apply(null,arguments),u){var n=d.getEntries().find((function(t){return u(t.value,e)}));n&&(e=n.value)}d.put(arguments,e)}return e}return f.clearCache=function(){return d.clear()},f}function lo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i,a=0,s={memoizeOptions:void 0},c=r.pop();if("object"==typeof c&&(s=c,c=r.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=s.memoizeOptions,l=void 0===u?n:u,d=Array.isArray(l)?l:[l],f=function(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var n=e.map((function(t){return"function"==typeof t?"function "+(t.name||"unnamed")+"()":typeof t})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}(r),p=t.apply(void 0,[function(){return a++,c.apply(null,arguments)}].concat(d)),v=t((function(){for(var t=[],e=f.length,n=0;n<e;n++)t.push(f[n].apply(null,arguments));return i=p.apply(null,t)}));return Object.assign(v,{resultFunc:c,memoizedResultFunc:p,dependencies:f,lastResult:function(){return i},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),v}}var fo=lo(uo);function po(t){return 0===Object.keys(t||{}).length}function vo(t){try{return t.reduce(((t,e)=>t+Object.keys(e).length),0)}catch(t){return 0}}var go=n(5578),ho=n.n(go);function yo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function bo(t){const{onReboot:e}=t;return J(t,["onReboot"])}function mo(t,e){return(null==t?void 0:t.name)===(null==e?void 0:e.name)}const wo=t=>t.App.state===Or.Ready,So=t=>t.App.state===Or.Delayed,Oo=t=>t.App.clients,_o=t=>fo(Oo,(e=>e.find((e=>e.token===t)))),Eo=t=>t.App.config.sendDebugLog,Io=t=>t.App.config.sendGalactusRequest,xo=t=>t.App.config.disableCrossdomain,Ao=t=>t.App.config.manualPageview,jo=t=>t.Context.user,Do=t=>t.Context.page,ko=t=>t.Context.adBlockDetected,Po=t=>t.Context.adSlots,Co=t=>t.BrowserStorage.crossdomain.status,Ro=fo(Co,(t=>"initializing"!==t)),No=fo(Co,(t=>t===Ur.Ready)),To=fo((t=>t.BrowserStorage.local.status),(t=>t===Ur.Ready)),Lo=fo(No,To,((t,e)=>t||e)),Bo=fo(Do,(t=>t.BrowserStorage.session.pages),(t=>t.BrowserStorage.history.pages),((t,e,n)=>{return r=[t].concat(e).concat(n).filter(Boolean),c(r,(function(t){return t.time})).sort((function(t,e){return e.time-t.time}));var r})),Mo=fo((t=>t.BrowserStorage.session.actions),(t=>t.BrowserStorage.history.actions),((t,e)=>{return n=t.concat(e).filter(Boolean),ho()(n,(t=>t.action.time)).sort(((t,e)=>e.action.time-t.action.time));var n})),Uo=t=>t.BrowserStorage.history.interactions,Fo=t=>t.BrowserStorage.session.interactions,zo=fo(Fo,Uo,((t,e)=>function(t){const e={};return t.forEach((t=>{for(const[n,r]of Object.entries(t))e[n]?e[n]+=r:e[n]=r})),e}([t,e]))),$o=fo(Fo,Uo,((t,e)=>{const n=Object.keys(t),r=Object.keys(e),o=[].concat(n,r).filter(Boolean);return ao()(o)})),Vo=fo([Bo],(t=>{const e={};return t.forEach((t=>{if(t.isValid){const{product:n,productId:r}=t,o=e[n]||{};o[r]=(o[r]||0)+1,e[n]=o}})),e})),Ho=fo((t=>t.BrowserStorage.crossdomain.pagesFinished),(t=>t.BrowserStorage.crossdomain.actionsFinished),(t=>t.BrowserStorage.crossdomain.interactionsFinished),((t,e,n)=>t&&e&&n)),Go=t=>t.App.config.disableCrossdomain||t.BrowserStorage.crossdomain.status===Ur.Off,Wo=t=>e=>{var n;return null===(n=e.BrowserStorage.serviceCache.galactusUserProfile)||void 0===n?void 0:n[t]},Ko=t=>t.BrowserStorage.serviceCache.activeData,qo=fo((t=>t.App.state===Or.Starting),To,Do,((t,e,n)=>t&&e&&!!n)),Jo=F({event:"silversurfer",category:z("silversurfer"),isDebug:function(){const t=Object.values(jt);for(let e=0;e<t.length;e++)if(Ct(t[e]))return!0;return!1}()}),Yo=Jo,Xo=window.requestIdleCallback||function(t){let e=Date.now();return window.setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},Qo=window.cancelIdleCallback||function(t){window.clearTimeout(t)},Zo=6e4;let ti=!1;function ei(t){return Y(this,void 0,void 0,(function*(){const e=t||x();let n;if(n=Wo(e)(oo.getState()),n)Mt.debug("getGalactusUserProfile: Profile read from cache",n);else{const e=yield function(t){return Y(this,void 0,void 0,(function*(){return re()?yield function(t){return Y(this,void 0,void 0,(function*(){const e=yield Xt(),n=yield null==e?void 0:e.get(qt,Qt(t));return n&&n.apiVersion===et?tt()(n,"apiVersion"):null}))}(t):ne()?yield function(t){return Y(this,void 0,void 0,(function*(){const e=localStorage.getItem(at(t));if(e){const t=JSON.parse(e);if(t&&t.apiVersion===et)return tt()(t,"apiVersion")}return null}))}(t):null}))}(t);e&&(n=ge()(nt,e)),Mt.debug("getGalactusUserProfile: Profile read from storage",n)}return!ti&&Io(oo.getState())&&(ti=!0,vr((()=>function(t){return Y(this,void 0,void 0,(function*(){let e=null;const n=Xo((()=>Y(this,void 0,void 0,(function*(){if(!(Date.now()-0<Zo))try{const n=yield function(t){return Y(this,void 0,void 0,(function*(){if(Fe())return null;try{yield Ue()}catch(t){return Mt.debug("Consent not given, cannot contact Galactus"),null}try{const e=yield pe(`galactus-user-profile/profiles/${t}`);if(200===e.status){const t=yield e.json(),n=function(t){return ge()(nt,t)}(t);return Mt.debug("Galactus API response",n),T({event:"custom-galactus-api-response-full",category:"custom-galactus-api-response-full",label:"custom-galactus-api-response-full",galactusResponse:t,skipValidation:!0}),n}}catch(t){Mt.error("Failed to fetch profile",t)}return null}))}(t);if(n&&(null==n?void 0:n.profileId)){const r=JSON.stringify(n);r!==e&&(Mt.debug("getGalactusUserProfile: Profile updated from Galactus",n),oo.dispatch(Gr({beaconId:t,profile:n})),function(t,e){Y(this,void 0,void 0,(function*(){const n=!!re()&&(yield function(t,e){return Y(this,void 0,void 0,(function*(){const n=yield Xt(),r=Qt(t),o=Object.assign(Object.assign({},e),{apiVersion:et});return(yield null==n?void 0:n.put(qt,o,r))===r}))}(t,e)),r=!!ne()&&(yield function(t,e){return Y(this,void 0,void 0,(function*(){try{localStorage.setItem(at(t),JSON.stringify(Object.assign(Object.assign({},e),{apiVersion:et})))}catch(t){return!1}return!0}))}(t,e)),o=n||r;return o||Mt.error("Failed to cache Galactus response",t,e),o}))}(t,n),e=r)}}catch(t){Mt.error("Fail to fetch data from Galactus",t),Qo(n)}}))))}))}(e)))),n}))}function ni(t,e){var n,r,o,i;return ao()([].concat(Object.keys(null!==(o=null===(r=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n.adTags)||void 0===r?void 0:r.pform)&&void 0!==o?o:[]),Object.keys(null!==(i=null==t?void 0:t.pform)&&void 0!==i?i:[])).filter(Boolean))}function ri(t){var e,n,r;return(null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.devices)||void 0===n?void 0:n.set)&&void 0!==r?r:[]).map((t=>({type:oi(t),platform:ii(t),browser:ai(t)})))}function oi(t){return t.type.toLowerCase().replace("unknown","other")}function ii(t){const e=t.os.toLowerCase(),n=t.make.toLowerCase();let r="other";return e.includes("android")&&(r="android"),n.includes("apple")&&(r="apple"),r}function ai(t){return t.browser.toLowerCase().replace("unknown","other")}function si(t){var e,n,r,o;const i=null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.locations)||void 0===n?void 0:n.set)&&void 0!==r?r:[],a=null===(o=null!=(s=function(t){try{var e,n=decodeURIComponent(null!=(e=I("Geo"))?e:"{}");return n?JSON.parse(n):void 0}catch(t){return}}())?s:{})||void 0===o?void 0:o.country;var s;return ao()([].concat(i.map((t=>t.country)),[a]).filter(Boolean).map((t=>t.toUpperCase())))}function ci(t){var e,n,r,o,i,a,s,c;const u=null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.languages)||void 0===n?void 0:n.contentLanguages)&&void 0!==r?r:[],l=null!==(a=null===(i=null===(o=null==t?void 0:t.namespaces)||void 0===o?void 0:o.languages)||void 0===i?void 0:i.acceptLanguages)&&void 0!==a?a:[],d=[null===(s=Do(oo.getState()))||void 0===s?void 0:s.pageLanguage,null===(c=jo(oo.getState()))||void 0===c?void 0:c.lang],f=[window.navigator.language.split("-")[0]],p=Bo(oo.getState());return ao()([].concat(u.map((t=>t.languageCode)),l.map((t=>t.languageCode)),p.map((t=>null==t?void 0:t.pageLanguage)),d,f).filter(Boolean).map((t=>t.toLowerCase())))}var ui,li,di,fi,pi,vi;function gi(t){return 1===t?fi.FIRST_TIME_VISITOR:t<=5?fi.RETURNING_VISITOR:fi.FREQUENT_VISITOR}function hi(t){const e=Bo(oo.getState()).length;if(e>0)return gi(e);const n=[];return Object.values(t).forEach((t=>{n.push(Math.max.apply(null,Object.values(t)))})),gi(Math.max.apply(null,n))}function yi(t){return[hi(t)]}function bi(t,e){var n,r,o,i;return ao()([].concat(Object.keys(null!==(o=null===(r=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n.adTags)||void 0===r?void 0:r.tv)&&void 0!==o?o:[]),Object.keys(null!==(i=null==t?void 0:t.tv)&&void 0!==i?i:[])).filter(Boolean))}function mi(t){if(t){const{media:e,gnre:n,theme:r}=t;return ao()([].concat(e?Object.keys(e):void 0,n?Object.keys(n):void 0,r?Object.keys(r):void 0).filter(Boolean))}return[]}!function(t){t.DELAYED="silver-surfer:delayed",t.READY="silver-surfer:ready"}(ui||(ui={})),(vi=li||(li={})).LOADED="loaded",vi.COLLAPSED="collapsed",vi.BLOCKED="blocked",(pi=di||(di={})).WIKI_CONTENT="wiki content",pi.FEATURED_VIDEO="featured video",pi.DISCUSSIONS="discussions",pi.ADS="ads",function(t){t.FIRST_TIME_VISITOR="1st time visitor",t.RETURNING_VISITOR="returning visitor",t.FREQUENT_VISITOR="frequent visitor"}(fi||(fi={})),se("pathfinder",kt);const wi=ce("pathfinder",kt);de(wi);const Si=fe(wi),Oi="active-data-management-service";var _i=n(1609),Ei=n.n(_i);const Ii=6e4;let xi=0;function Ai(){var t,e;return Y(this,void 0,void 0,(function*(){const n=yield function(){return Y(this,void 0,void 0,(function*(){const t=x();let e=nt;return t?(e=yield ei(t),Yo.loaded({category:"galactus-user-profile-loaded",label:"galactus-user-profile-loaded |  "+((null==e?void 0:e.profileId)?"true":"false")})):Yo.loaded({category:"galactus-user-profile-failed-loaded",label:"no-beacon"}),e}))}(),r=yield function(){return Y(this,void 0,void 0,(function*(){const t=Ko(oo.getState());if(!Ei()(t)&&Date.now()-xi<Ii)return t;const e=yield function(){return Y(this,void 0,void 0,(function*(){if(Fe())return{};try{yield Ue()}catch(t){return Mt.debug("Consent not given, cannot contact active-data-management-system"),{}}try{const t=yield pe(`${Oi}/profiles?cb=${Date.now()}`);if(200===t.status){const e=yield t.json();return Mt.debug("active-data-management-system API response",e),e}}catch(t){Mt.error("Failed to fetch active-data",t)}return{}}))}();return Mt.debug("getActiveData: read from ADMS",e),xi=Date.now(),oo.dispatch(Wr({activeData:e})),e}))}(),o=function(t){var e,n,r;let o=null!==(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.adTags)&&void 0!==n?n:{};if(!po(o)){Mt.debug("getUserProfile: Galactus AdTags are empty, fallback to history");const t=null!==(r=Bo(oo.getState()).map((({adTags:t})=>t)))&&void 0!==r?r:[];i=t.filter(Boolean).map(E),a={},i.forEach((function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r,o=n[e],i=o[0],s=o[1],c=i,u=null!=(r=a[c])?r:{};if(s)for(var l=0,d=Object.entries(s);l<d.length;l++){var f,p=d[l],v=p[0],g=p[1];u[v]=(null!=(f=u[v])?f:0)+g}a[c]=u}})),o=a}var i,a;return po(o)&&(Mt.debug("getUserProfile: History is empty, fallback to current page"),o=E(Do(oo.getState()).adTags)),o}(n),i={beaconId:x(),gender:Object.keys(null!==(t=null==o?void 0:o.sex)&&void 0!==t?t:{}),affiliation:yi(o),interactions:$o(oo.getState()),ageBrackets:Object.keys(null!==(e=null==o?void 0:o.age)&&void 0!==e?e:{}),devices:ri(n),language:ci(n),country:si(n),interests:mi(o),consoles:ni(o,n),streaming:bi(o,n),adTags:o,activeData:r,visitedProducts:Vo(oo.getState())};return Mt.debug("getUserProfile: Profile complete",i),i}))}function ji(t){if(Rt()&&Mt.debug("AdEngine event",t),(null==t?void 0:t.name)&&(null==t?void 0:t.state)){let e;"collapse"===t.state&&(e=li.COLLAPSED),"success"===t.state&&(e=li.LOADED),"blocked"===t.state&&(e=li.BLOCKED),e&&oo.dispatch(Tr({name:t.name,status:e}))}}function Di(){const t=Ne();t&&(Mt.debug("Start listening for Ad events"),t.on(Te,ji),t.on(Le,ji),t.on(Be,ji),t.on(Me,ji))}function ki(){const t=j();return!t.isUnknown&&(Mt.debug("Updating user context from window",t.toTransport()),oo.dispatch(Rr(t)),t)}function Pi(){!function(){const t=j();t.isUnknown?(Mt.debug("Reading user context from window failed, trying fallback..."),function(){return _.apply(this,arguments)}().then((t=>{ki()||t.isUnknown||(Mt.debug("Reading user context from fallback",t.toTransport()),oo.dispatch(Rr(t)))})).catch((t=>{ki()||Mt.error("Reading user context from fallback failed",t)}))):(Mt.debug("Reading user context from window",t.toTransport()),oo.dispatch(Rr(t)));const e=A();Mt.debug("Reading page context from window",e.toTransport()),oo.dispatch(Nr(e))}(),vr(Di)}function Ci(){let t=Do(oo.getState());t.isValid||(t=A(),t.isValid&&(Mt.debug("Updated page context from window",t.toTransport()),oo.dispatch(Nr(t))));let e=jo(oo.getState());if(e.isUnknown){const t=ki();t&&(e=t)}return{current:t,pages:Bo(oo.getState()),features:{adBlockDetected:ko(oo.getState())},slots:Po(oo.getState()),user:e}}function Ri(t){return Y(this,void 0,void 0,(function*(){if(!function(t){return!(!t||"string"!=typeof t.name||(null==t?void 0:t.onReboot)&&"function"!=typeof t.onReboot)}(t))return Mt.debug("registerClient: Invalid client",t),Yo({label:"client-registration",action:"invalid",client:t}),null;const e=Oo(oo.getState());if(function(t,e){var n;return null!==(n=null==e?void 0:e.findIndex((e=>mo(e,t))))&&void 0!==n?n:-1}(t,e)>-1)return Mt.debug("registerClient: Already registered client",t),Yo({label:"client-registration",action:"already-registered",client:t}),null;const n=function(t){return Object.assign(Object.assign({},t),{time:Date.now(),token:yo(),ssVersion:kt})}(t);return oo.dispatch(Dr(n)),Mt.debug("registerClient: Client registered",n),n.token}))}const Ni=kt;function Ti(t,e){return{type:t,timestamp:Date.now(),payload:e,xv:Ni}}var Li;!function(t){t.PageviewRequest="SilverSurfer::Pageview::Request",t.PageviewResponse="SilverSurfer::Pageview::Response",t.AddActionRequest="SilverSurfer::AddAction::Request",t.AddActionResponse="SilverSurfer::AddAction::Response",t.AddInteractionRequest="SilverSurfer::AddInteraction::Request",t.AddInteractionResponse="SilverSurfer::AddInteraction::Response",t.HistorySizeResponse="SilverSurfer::HistorySize::Response",t.HistoryPagesResponse="SilverSurfer::HistoryPages::Response",t.HistoryActionsResponse="SilverSurfer::HistoryActions::Response",t.HistoryInteractionsResponse="SilverSurfer::HistoryInteractions::Response"}(Li||(Li={}));class Bi{constructor(t,e,n,r){this._sending=!1,this._queue=[],this._options={},this._onMessageCallback=n,this._origin=t,this._options=r,this._initialize(e)}get status(){return this._status}_log(t,...e){var n;(null===(n=this._options)||void 0===n?void 0:n.debug)&&console.log(`CrossDomainSender::${t}`,...e)}_initialize(t){this._log("_initialize"),this._status=Ur.Initializing;const e=document.createElement("iframe");e.style.display="none",e.sandbox="allow-same-origin allow-scripts",e.addEventListener("load",this._onIframeLoad.bind(this)),e.addEventListener("error",this._onIframeLoadError.bind(this)),e.src=t,document.body.appendChild(e),this._iframe=e}_onIframeLoadError(t){var e;this._log("_onIframeLoadError",t.error),this._status=Ur.Off,"function"==typeof(null===(e=this._options)||void 0===e?void 0:e.onIframeError)&&this._options.onIframeError(t)}_onIframeLoad(){this._log("_onIframeLoad");const t=new MessageChannel;t.port1.onmessage=this._onMessage.bind(this),this._sendMessage(Ti(Mr.Request),[t.port2])}_onMessage(t){var e;"string"==typeof(e=t.data).xv&&"number"==typeof e.timestamp&&e.timestamp>0&&"string"==typeof e.type?(this._log("_onMessage",t),t.data.type===Mr.Response&&(this._status=Ur.Ready),"function"==typeof this._onMessageCallback&&this._onMessageCallback(t.data)):this._log("_onMessage - invalid message",t)}_sendMessage(t,e){this._log("_sendMessage",t),this._iframe.contentWindow.postMessage(t,this._origin,e)}_flushQueue(){if(this._status===Ur.Ready&&!this._sending){let t;for(this._sending=!0;t=this._queue.shift(),void 0!==t;)this._sendMessage(t);this._sending=!1}}send(t){this._queue.push(t),this._flushQueue()}}function Mi(){return""!==window.location.port&&"80"!==window.location.port?null:Pt?`https://${mr}`:Dt()&&Ct("ss_force_crossdomain=true")?`${window.location.protocol}//${window.location.host}`:null}let Ui;const Fi=Dt()?500:14e3;function zi(){try{if(!Ui){if(xo(oo.getState()))return Mt.debug("Cross domain connection disabled (on purpose)"),void oo.dispatch(Kr({status:Ur.Off,statusErrorMessage:"disabled"}));if(!Mi())return Mt.debug("Cross domain connection disabled (unsupported origin)"),void oo.dispatch(Kr({status:Ur.Off,statusErrorMessage:"incorrect-origin"}));Mt.debug("Initializing cross domain connection"),Ui=new Bi(Mi(),function(){let t=window.location.search;return Eo(oo.getState())&&(t+=`${t.length?"&":"?"}cb=${Date.now()}`),`${Mi()}/silver-surfer.html${t}`}(),$i,{debug:Eo(oo.getState()),onIframeError:t=>{oo.dispatch(Kr({status:Ur.Off,statusErrorMessage:"iframe-error"})),Mt.error("Cross domain frame error")}}),setTimeout((()=>{oo.dispatch(Kr({status:Ur.Off,statusErrorMessage:"timeout"})),Mt.error("Cross domain timeout")}),Fi)}}catch(t){Mt.error("Cross domain error thrown",t),oo.dispatch(Kr({status:Ur.Off,statusErrorMessage:"unknown"}))}}function $i(t){switch(t.type){case Mr.Response:return oo.dispatch(Kr({status:Ur.Ready})),void Mt.debug("Cross domain connected");case Li.HistorySizeResponse:{const e=t.payload;return oo.dispatch(Xr(e)),void Mt.debug("Cross domain sent storage size",e)}case Li.HistoryInteractionsResponse:{const e=t.payload;return oo.dispatch(to(e)),void Mt.debug("Cross domain sent history interactions",e)}case Li.HistoryPagesResponse:{const e=t.payload;return oo.dispatch(Qr(e)),void Mt.debug("Cross domain sent history pages",e)}case Li.HistoryActionsResponse:{const e=t.payload;return oo.dispatch(Zr(e)),void Mt.debug("Cross domain sent history actions",e)}case Li.PageviewResponse:return void Mt.debug("Cross domain pageview ack");case Li.AddActionResponse:return void Mt.debug("Cross domain action ack");case Li.AddInteractionResponse:return void Mt.debug("Cross domain interaction ack");default:return void Mt.error("Unknown message type",t)}}function Vi(t){return Y(this,void 0,void 0,(function*(){Mt.debug("New interaction",t),oo.dispatch(Yr(t)),function(t){Ui&&Ui.status===Ur.Ready?(Mt.debug("Sending cross domain interaction",t),Ui.send(function(t){return Ti(Li.AddInteractionRequest,t)}(t))):Mt.debug("Cross domain not ready on interaction")}(t)}))}const Hi=function(t){let e=0;const n="function"==typeof(null==t?void 0:t.onResolve)?t.onResolve:()=>{},r="function"==typeof(null==t?void 0:t.onReject)?t.onReject:()=>{};return()=>new Promise(((o,i)=>{const a=setInterval((()=>{t.eventCheck()&&(clearInterval(a),o(n())),t.intervalTime*e>t.maxWaitTime&&(clearInterval(a),i(r())),e++}),t.intervalTime)}))}({eventCheck:()=>Lo(oo.getState()),intervalTime:100,maxWaitTime:5e3,onReject:()=>Mo(oo.getState()),onResolve:()=>Mo(oo.getState())});function Gi(){return Y(this,void 0,void 0,(function*(){try{return yield Hi()}catch(t){if(Array.isArray(t))return t;Mt.error("Error getting actions",t)}return[]}))}function Wi(t){const e=_o(t)(oo.getState());if(!e)throw new Error("Incorrect token");return e}function Ki(t,e){return Y(this,void 0,void 0,(function*(){const n=Wi(t);return function(t,e,n){let r=t.filter((t=>mo(t.client,e))).map((t=>t.action));return"string"==typeof n&&n.length>0&&(r=r.filter((t=>t.type===n))),r}(yield Gi(),n,e)}))}function qi(t){return Y(this,void 0,void 0,(function*(){return Dt()||Wi(t),yield Gi()}))}function Ji(t,e,n,r){return Y(this,void 0,void 0,(function*(){const o=function(t,e,n,r){return{client:bo(t),action:{time:Date.now(),name:e,type:n,payload:r}}}(Wi(t),e,n,r);Mt.debug("New action",o),oo.dispatch(Jr(o)),function(t){Ui&&Ui.status===Ur.Ready?(Mt.debug("Sending cross domain action",t),Ui.send(function(t){return Ti(Li.AddActionRequest,t)}(t))):Mt.debug("Cross domain not ready on action")}(o)}))}var Yi;!function(t){t.ADD="add",t.CLICK="click",t.CLOSE="close",t.CONFIRM="confirm",t.CREATE="create",t.DISABLE="disable",t.ENABLE="enable",t.ERROR="error",t.HOVER="hover",t.IMPRESSION="impression",t.IDENTITY="identity",t.KEYPRESS="keypress",t.NO_IMPRESSION="no-impression",t.OPEN="open",t.PLAY_VIDEO="play-video",t.QUIZ="quiz",t.REACTION="reaction",t.REMOVE="remove",t.SELECT="select",t.SHARE="share",t.SUBMIT="submit",t.SUCCESS="success",t.SWIPE="swipe",t.VIEW="view",t.REACTION_COUNT="reaction-count",t.HEALTH="health",t.HIGHLIGHT="highlight",t.MYFANDOM="myfandom",t.CALENDAR_EVENTS="calendarevents",t.COLLECTIONITEM="collectionitem"}(Yi||(Yi={}));var Xi=n(8446),Qi=n.n(Xi);function Zi(t,e,n){let r;function o(){const o=e(t.getState());Qi()(o,r)||(r=o,n(r))}const i=t.subscribe(o);return o(),i}function ta(t){const e=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return e?e[1]:null}function ea(){return Y(this,void 0,void 0,(function*(){var t,e;t=$r(Do(oo.getState())),Ui&&Ui.status===Ur.Ready?(Mt.debug("Tracking cross domain page",t),Ui.send((e=t,Ti(Li.PageviewRequest,e)))):Mt.debug("Cross domain not ready on pageview")}))}const na="fan_visited_wikis";function ra(){return Y(this,void 0,void 0,(function*(){const t=Do(oo.getState()),e=$r(t);Mt.debug("Tracking local page",e),oo.dispatch(qr(e));try{if(yield Ue(),![b.MEDIAWIKI,b.DISCUSSIONS].includes(t.product))return void Mt.debug("Fallback for visited wikis DISABLED - not MW or Discussions",t.product);let e=(ta(na)||"").split(",");e.includes(t.productId)||(e=e.slice(-50),e.push(t.productId));const n=31536e3;document.cookie=`${na}=${e.filter(Boolean).join(",")};path=/;domain=.fandom.com;max-age=${n};SameSite=None;Secure`,Mt.debug("Fallback for visited wikis enabled, new values",e)}catch(t){Mt.debug("Consent not given, fallback cookie not set",t)}}))}function oa(t,e){const n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)}const ia="ss_galactus_enabled";function aa(){return document.cookie.includes(ia)}let sa=null;function ca(){return Y(this,void 0,void 0,(function*(){const t=So(oo.getState()),e=wo(oo.getState());if(!t&&!e)return Mt.error("trackPageview cannot be triggered until SilverSurfer is bootstrapped"),!1;const n=m.fromWindow();return function(t,e){return t instanceof m&&e instanceof m&&t.product===e.product&&t.productId===e.productId&&t.page===e.page&&t.pageId===e.pageId}(n,sa)?(Mt.info("Page context did not change, skipping pageview"),!1):(Mt.debug("Firing manual pageview"),Pi(),ra().catch(Mt.error),e&&(No(oo.getState())&&ea().catch(Mt.error),oo.dispatch(Ir.reboot())),t&&oo.dispatch(Ir.starting()),sa=n,!0)}))}const ua=["default","uuid"],la=t=>`fid_${t}`;function da(t,e="default"){return Y(this,void 0,void 0,(function*(){if(e&&!ua.includes(e))throw new Error(`Invalid type: ${e}`);if(!t.match(/^[a-zA-Z0-9_]+$/))throw new Error(`Invalid name: ${t}`);if(!window.location.hostname.endsWith("fandom.com"))throw new Error("Global ID is only available on fandom.com domain");let n=ta(la(t));return n||(n=yo()),document.cookie=`${la(t)}=${n}; path=/; domain=.fandom.com; max-age=157680000; SameSite=Lax`,n}))}const fa={trackPageview:ca,getContext:Ci,registerClient:Ri,getUserProfile:Ai,addInteraction:Vi,ACTION:Yi,addActiveDataAction:ha,addAction:Ji,getAllActions:qi,getActions:Ki,getGalactusUserProfile:ei,isCrossdomainFinished:Oa,isCrossdomainDisabled:_a,isInitialized:Ea,isReady:Ia,getVersionHash:xa,getGlobalId:da},pa=Yi;function va(){return ca()}function ga(t){return Ri(t)}function ha(t,e,n,r){return function(t,e,n,r){return Y(this,void 0,void 0,(function*(){const o={time:Date.now(),name:e,type:n,payload:Object.assign(Object.assign({},r||{}),{_type:n})};(yield function(t){return Y(this,void 0,void 0,(function*(){if(Fe())return!0;try{if(200===(yield Si(`${Oi}/validate/`,Object.assign({},t))).status)return!0}catch(t){Mt.error("Failed to post active data action",t)}return!1}))}(o))?yield Ji(t,e,n,r):Mt.error("Error posting active data action",o)}))}(t,e,n,r)}function ya(t,e,n,r){return Ji(t,e,n,r)}function ba(t,e){return Ki(t,e)}function ma(t){return qi(t)}function wa(){return Ai()}function Sa(t){return Vi(t)}function Oa(){return Ho(oo.getState())}function _a(){return Go(oo.getState())}function Ea(){return wo(oo.getState())}function Ia(){return Ea()&&(Oa()||_a())}function xa(){return kt}function Aa(t){return ei(t||x())}function ja(t,e="default"){return da(t,e)}function Da(){return Ci()}try{q(h.SS_PRE_BOOTSTRAP),oo.getState().App.state===Or.New&&(Mt.debug(`Booting SilverSurfer #${kt}`,oo.getState().App.config),function(){const t=Zi(oo,qo,(e=>Y(this,void 0,void 0,(function*(){e&&(t(),Mt.debug("Booted, running post-boot actions"),Zi(oo,Bo,(t=>{(function(t){return Y(this,void 0,void 0,(function*(){const e=!!re()&&(yield function(t){return Y(this,void 0,void 0,(function*(){const e=yield Xt(),n=null==e?void 0:e.transaction(Ht,"readwrite",{durability:"strict"});if(!(null==n?void 0:n.store))return!1;yield n.store.clear();let r=!0;return Q()(t,te[Zt.IndexedDB]).forEach((t=>Y(this,void 0,void 0,(function*(){const{id:e}=t,o=J(t,["id"]),i=yield n.store.put(o,e);r&&(r=i===e)})))),yield n.done,r}))}(t)),n=!!ne()&&(yield function(t){return Y(this,void 0,void 0,(function*(){try{localStorage.setItem(rt,JSON.stringify(Q()(t,te[Zt.LocalStorage])))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Mt.debug("Local pages updated from cross domain"):Mt.error("Failed to update local pages"),r}))})(t.map($r)).then((()=>{Mt.debug("LocalStorage pages saved",t)}))})),Zi(oo,Mo,(t=>{(function(t){return Y(this,void 0,void 0,(function*(){const e=!!re()&&(yield function(t){return Y(this,void 0,void 0,(function*(){const e=yield Xt(),n=null==e?void 0:e.transaction(Gt,"readwrite",{durability:"strict"});if(!(null==n?void 0:n.store))return!1;yield n.store.clear();let r=!0;return Q()(t,ee[Zt.IndexedDB]).forEach((t=>Y(this,void 0,void 0,(function*(){const e=yield n.store.put(t);r&&(r=!!e)})))),yield n.done,r}))}(t)),n=!!ne()&&(yield function(t){return Y(this,void 0,void 0,(function*(){try{localStorage.setItem(ot,JSON.stringify(Q()(t,ee[Zt.LocalStorage])))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Mt.debug("Local actions updated from cross domain"):Mt.error("Failed to update local actions"),r}))})(t).then((()=>{Mt.debug("LocalStorage actions saved",t)}))})),Zi(oo,zo,(t=>{oe(t).then((()=>{Mt.debug("LocalStorage interactions saved",t)}))})),ra().catch(Mt.error),Ai().catch(Mt.error),(oo.getState().App.config.sendTracking||aa())&&(aa()||function(){const t=new Date;t.setMonth(t.getMonth()+12),document.cookie=ia+"=true;expires="+t+";domain=.fandom.com;path=/"}()),oo.dispatch(Ir.ready()),q(h.SS_SDK_READY),oa(ui.READY),vr(zi))}))))}(),function(){const t=Zi(oo,Ro,(e=>{e&&(q(h.SS_CROSS_DOMAIN_READY),t(),Mt.debug("Cross domain initialized:",Co(oo.getState()),oo.getState().BrowserStorage.crossdomain.statusErrorMessage),Ao(oo.getState())||ea().catch(Mt.error))})),e=Zi(oo,Ho,(t=>{t&&(e(),Mt.debug("Cross domain finished"))}))}(),function(){return Y(this,void 0,void 0,(function*(){const t=yield function(){return Y(this,void 0,void 0,(function*(){return re()?yield function(){var t;return Y(this,void 0,void 0,(function*(){const e=yield Xt(),n=null!==(t=yield null==e?void 0:e.getAllKeys(Ht))&&void 0!==t?t:[],r=yield null==e?void 0:e.getAll(Ht);return n.map(((t,e)=>Object.assign({id:t},r[e])))}))}():ne()?yield ct():[]}))}(),e=yield function(){return Y(this,void 0,void 0,(function*(){return re()?yield function(){return Y(this,void 0,void 0,(function*(){const t=yield Xt();return yield null==t?void 0:t.getAll(Gt)}))}():ne()?yield ut():[]}))}(),n=yield function(){return Y(this,void 0,void 0,(function*(){return re()?yield function(){var t;return Y(this,void 0,void 0,(function*(){const e=yield Xt();return null!==(t=yield null==e?void 0:e.get(Wt,Kt))&&void 0!==t?t:{}}))}():ne()?yield st():{}}))}(),r={interactions:n,actions:e,pages:t};Mt.debug("Read from local domain",r),oo.dispatch(eo(r));const o=yield ie();oo.dispatch(no(o));const i=vo(t)+vo(e)+vo([n]);zt("sdk-read-pages",t.length,.02,vo(t).toString()),zt("sdk-total-objects",i,.02,e.length.toString()),zt("sdk-storage-size",o.indexedDBSize,.02,o.localStorageSize.toString());try{if(navigator&&navigator.storage&&navigator.storage.estimate){const t=yield window.navigator.storage.estimate(),e=t.quota;zt("sdk-navigator-estimate",t.usage,.02,e.toString()),t.usageDetails&&t.usageDetails.indexedDB&&zt("sdk-navigator-estimate-indexeddb",t.usageDetails.indexedDB,.02)}}catch(t){}}))}().catch(Mt.error),Ao(oo.getState())?(Mt.info("Manual pageview is enabled"),oo.dispatch(Ir.delayed()),oa(ui.DELAYED)):(Pi(),ra().catch(Mt.error),oo.dispatch(Ir.starting())))}catch(He){Mt.error("SilverSurfer bootstrap failed",He)}const ka=fa})(),r})()));
//# sourceMappingURL=sdk.js.map